<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Galey Wangmo">

<title>Data Cleaning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="02_data_cleaning_files/libs/clipboard/clipboard.min.js"></script>
<script src="02_data_cleaning_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="02_data_cleaning_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="02_data_cleaning_files/libs/quarto-html/popper.min.js"></script>
<script src="02_data_cleaning_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="02_data_cleaning_files/libs/quarto-html/anchor.min.js"></script>
<link href="02_data_cleaning_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02_data_cleaning_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="02_data_cleaning_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="02_data_cleaning_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="02_data_cleaning_files/libs/bootstrap/bootstrap-81267100e462c21b3d6c0d5bf76a3417.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Data Cleaning</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Galey Wangmo </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="load-required-libraries" class="level3">
<h3 class="anchored" data-anchor-id="load-required-libraries">01. Load Required Libraries</h3>
<p>This section loads all necessary R packages used for data cleaning, transformation, and visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"00_load_packages.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.1     ✔ stringr   1.5.2
✔ ggplot2   4.0.0     ✔ tibble    3.3.0
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.1.0     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors
here() starts at /Users/galeywangmo/Documents/Intern/QCIF-Workshop-Analytics


Attaching package: 'janitor'


The following objects are masked from 'package:stats':

    chisq.test, fisher.test



Attaching package: 'scales'


The following object is masked from 'package:purrr':

    discard


The following object is masked from 'package:readr':

    col_factor


Packages loaded.</code></pre>
</div>
</div>
</section>
<section id="load-raw-attendance-data" class="level3">
<h3 class="anchored" data-anchor-id="load-raw-attendance-data">02 Load Raw Attendance Data</h3>
<p>This section imports the merged attendance dataset from the output folder for further cleaning and analysis.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define output folder</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>output_dir <span class="ot">&lt;-</span> <span class="fu">here</span>(<span class="st">"output"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Read merged datasets</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(output_dir, <span class="st">"attendance_all_years.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="initial-exploration" class="level3">
<h3 class="anchored" data-anchor-id="initial-exploration">03. Initial Exploration</h3>
<p>This section checks the structure of the attendance dataset and counts missing values.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(attendance_all_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 5,251
Columns: 62
$ Event                                                                                                                                                         &lt;chr&gt; …
$ First.name                                                                                                                                                    &lt;chr&gt; …
$ Last.name                                                                                                                                                     &lt;chr&gt; …
$ Seating.location                                                                                                                                              &lt;lgl&gt; …
$ Ticket.type                                                                                                                                                   &lt;chr&gt; …
$ Reporting.group                                                                                                                                               &lt;lgl&gt; …
$ Package                                                                                                                                                       &lt;lgl&gt; …
$ Order.id                                                                                                                                                      &lt;chr&gt; …
$ Ticket.no.                                                                                                                                                    &lt;chr&gt; …
$ Order.date...time                                                                                                                                             &lt;chr&gt; …
$ Timezone                                                                                                                                                      &lt;chr&gt; …
$ Buyer.first.name                                                                                                                                              &lt;chr&gt; …
$ Buyer.last.name                                                                                                                                               &lt;chr&gt; …
$ Buyer.mobile                                                                                                                                                  &lt;chr&gt; …
$ Buyer.email                                                                                                                                                   &lt;chr&gt; …
$ First.Name                                                                                                                                                    &lt;chr&gt; …
$ Last.Name                                                                                                                                                     &lt;chr&gt; …
$ Email                                                                                                                                                         &lt;chr&gt; …
$ Mobile                                                                                                                                                        &lt;chr&gt; …
$ I.am.                                                                                                                                                         &lt;chr&gt; …
$ Please.specify.                                                                                                                                               &lt;chr&gt; …
$ Organisation                                                                                                                                                  &lt;chr&gt; …
$ School.or.faculty                                                                                                                                             &lt;chr&gt; …
$ Organisation.Company                                                                                                                                          &lt;chr&gt; …
$ How.did.you.find.out.about.this.workshop.                                                                                                                     &lt;chr&gt; …
$ Paid                                                                                                                                                          &lt;chr&gt; …
$ Humanitix.passed.on.fees                                                                                                                                      &lt;chr&gt; …
$ Humanitix.absorbed.fees                                                                                                                                       &lt;chr&gt; …
$ Amex.surcharge                                                                                                                                                &lt;chr&gt; …
$ Custom.tax                                                                                                                                                    &lt;chr&gt; …
$ Zip.fee.absorbed.                                                                                                                                             &lt;chr&gt; …
$ Afterpay.fee.absorbed.                                                                                                                                        &lt;chr&gt; …
$ Refunds                                                                                                                                                       &lt;chr&gt; …
$ Fee.rebate                                                                                                                                                    &lt;chr&gt; …
$ Your.earnings                                                                                                                                                 &lt;chr&gt; …
$ Refunded.fees                                                                                                                                                 &lt;chr&gt; …
$ Discount.code.used                                                                                                                                            &lt;chr&gt; …
$ Discount.redeemed                                                                                                                                             &lt;chr&gt; …
$ Tax.on.sales                                                                                                                                                  &lt;chr&gt; …
$ Tax.on.booking.fees                                                                                                                                           &lt;chr&gt; …
$ Gateway                                                                                                                                                       &lt;chr&gt; …
$ Access.code.used                                                                                                                                              &lt;lgl&gt; …
$ Checked.in                                                                                                                                                    &lt;chr&gt; …
$ Checked.in.date                                                                                                                                               &lt;lgl&gt; …
$ Event.date                                                                                                                                                    &lt;chr&gt; …
$ Event.time                                                                                                                                                    &lt;chr&gt; …
$ QR.code.data                                                                                                                                                  &lt;chr&gt; …
$ Sales.Channel                                                                                                                                                 &lt;chr&gt; …
$ workshop                                                                                                                                                      &lt;chr&gt; …
$ month                                                                                                                                                         &lt;chr&gt; …
$ Do.you.have.experience.in.R.and.RStudio..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question. &lt;chr&gt; …
$ Do.you.have.experience.in.SPSS..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question.          &lt;chr&gt; …
$ Do.you.have.experience.in.Unix.Linux..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question.    &lt;chr&gt; …
$ year                                                                                                                                                          &lt;int&gt; …
$ Do.you.have.prior.experience.with.Python.                                                                                                                     &lt;chr&gt; …
$ Position.                                                                                                                                                     &lt;chr&gt; …
$ Are.you.currently.using.NCI.                                                                                                                                  &lt;chr&gt; …
$ Field.of.Research                                                                                                                                             &lt;chr&gt; …
$ Prior.knowledge.of.topic                                                                                                                                      &lt;chr&gt; …
$ School.faculty                                                                                                                                                &lt;chr&gt; …
$ Organisation.company                                                                                                                                          &lt;lgl&gt; …
$ Do.you.have.experience.in.SPSS..or.will.you.be.getting.training.prior.to.this.workshop.                                                                       &lt;chr&gt; …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(attendance_all_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   5251 obs. of  62 variables:
 $ Event                                                                                                                                                        : chr  "Introduction to Programming: R for Reproducible Scientific Analysis (Feb 2024)" "Introduction to Programming: R for Reproducible Scientific Analysis (Feb 2024)" "Introduction to Programming: R for Reproducible Scientific Analysis (Feb 2024)" "Introduction to Programming: R for Reproducible Scientific Analysis (Feb 2024)" ...
 $ First.name                                                                                                                                                   : chr  "Alexandra Anne" "Jacob" "Jermaine Marie Ann" "Jinyun" ...
 $ Last.name                                                                                                                                                    : chr  "Williams" "Batham" "Fabella" "Cai" ...
 $ Seating.location                                                                                                                                             : logi  NA NA NA NA NA NA ...
 $ Ticket.type                                                                                                                                                  : chr  "QCIF Members" "QCIF Members" "QCIF Members" "QCIF Members" ...
 $ Reporting.group                                                                                                                                              : logi  NA NA NA NA NA NA ...
 $ Package                                                                                                                                                      : logi  NA NA NA NA NA NA ...
 $ Order.id                                                                                                                                                     : chr  "MNVXUKLJ" "DVF54NPF" "Q42S8UNV" "2F3JYTKS" ...
 $ Ticket.no.                                                                                                                                                   : chr  "1st" "1st" "1st" "1st" ...
 $ Order.date...time                                                                                                                                            : chr  "2024-02-01 1:39 pm" "2024-02-01 1:22 pm" "2024-01-31 9:10 pm" "2024-01-31 2:50 pm" ...
 $ Timezone                                                                                                                                                     : chr  "AEST" "AEST" "AEST" "AEST" ...
 $ Buyer.first.name                                                                                                                                             : chr  "Alexandra Anne" "Jacob" "Jermaine Marie Ann" "Jinyun" ...
 $ Buyer.last.name                                                                                                                                              : chr  "Williams" "Batham" "Fabella" "Cai" ...
 $ Buyer.mobile                                                                                                                                                 : chr  "+61408189840" "0408795912" "0402641976" "+61493414889" ...
 $ Buyer.email                                                                                                                                                  : chr  "alexandra.williams@cqumail.com" "jacob.batham@griffith.edu.au" "j.fabella.10@student.scu.edu.au" "jin.cai@griffithuni.edu.au" ...
 $ First.Name                                                                                                                                                   : chr  "Alexandra Anne" "Jacob" "Jermaine Marie Ann" "Jinyun" ...
 $ Last.Name                                                                                                                                                    : chr  "Williams" "Batham" "Fabella" "Cai" ...
 $ Email                                                                                                                                                        : chr  "alexandra.williams@cqumail.com" "jacob.batham@griffith.edu.au" "j.fabella.10@student.scu.edu.au" "jin.cai@griffithuni.edu.au" ...
 $ Mobile                                                                                                                                                       : chr  "+61408189840" "0408795912" "0402641976" "+61493414889" ...
 $ I.am.                                                                                                                                                        : chr  "Higher Degree Research Student - PhD" "Professional Staff" "Higher Degree Research Student - other" "Higher Degree Research Student - other" ...
 $ Please.specify.                                                                                                                                              : chr  NA NA NA NA ...
 $ Organisation                                                                                                                                                 : chr  "Central Queensland University" "Griffith University" "Southern Cross University" "Griffith University" ...
 $ School.or.faculty                                                                                                                                            : chr  "CMERC" "NCNED" "Faculty of Science and Engineering" "School of Health Sciences and Social Work" ...
 $ Organisation.Company                                                                                                                                         : chr  NA NA NA NA ...
 $ How.did.you.find.out.about.this.workshop.                                                                                                                    : chr  "Supervisor" "Supervisor" "School/faculty newsletter" "Other" ...
 $ Paid                                                                                                                                                         : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Humanitix.passed.on.fees                                                                                                                                     : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Humanitix.absorbed.fees                                                                                                                                      : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Amex.surcharge                                                                                                                                               : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Custom.tax                                                                                                                                                   : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Zip.fee.absorbed.                                                                                                                                            : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Afterpay.fee.absorbed.                                                                                                                                       : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Refunds                                                                                                                                                      : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Fee.rebate                                                                                                                                                   : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Your.earnings                                                                                                                                                : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Refunded.fees                                                                                                                                                : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Discount.code.used                                                                                                                                           : chr  NA NA NA NA ...
 $ Discount.redeemed                                                                                                                                            : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Tax.on.sales                                                                                                                                                 : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Tax.on.booking.fees                                                                                                                                          : chr  "$0.00" "$0.00" "$0.00" "$0.00" ...
 $ Gateway                                                                                                                                                      : chr  "braintree" "braintree" "braintree" "braintree" ...
 $ Access.code.used                                                                                                                                             : logi  NA NA NA NA NA NA ...
 $ Checked.in                                                                                                                                                   : chr  "Not checked in" "Not checked in" "Not checked in" "Not checked in" ...
 $ Checked.in.date                                                                                                                                              : logi  NA NA NA NA NA NA ...
 $ Event.date                                                                                                                                                   : chr  "05/02/2024" "05/02/2024" "05/02/2024" "05/02/2024" ...
 $ Event.time                                                                                                                                                   : chr  "9:00 am - 12:30 pm" "9:00 am - 12:30 pm" "9:00 am - 12:30 pm" "9:00 am - 12:30 pm" ...
 $ QR.code.data                                                                                                                                                 : chr  "{\"eventId\":\"65812412e991ee36da043b4b\",\"_id\":\"65bb128ef7d958d10fe5cd33\"}" "{\"eventId\":\"65812412e991ee36da043b4b\",\"_id\":\"65bb0e5aeb92e0527ae4f813\"}" "{\"eventId\":\"65812412e991ee36da043b4b\",\"_id\":\"65ba2ac3d4ba953d2384a864\"}" "{\"eventId\":\"65812412e991ee36da043b4b\",\"_id\":\"65b9d18391ca4712311c07c3\"}" ...
 $ Sales.Channel                                                                                                                                                : chr  "Online" "Online" "Online" "Online" ...
 $ workshop                                                                                                                                                     : chr  "Introduction to Programming: R for Reproducible Scientific Analysis" "Introduction to Programming: R for Reproducible Scientific Analysis" "Introduction to Programming: R for Reproducible Scientific Analysis" "Introduction to Programming: R for Reproducible Scientific Analysis" ...
 $ month                                                                                                                                                        : chr  "Feb" "Feb" "Feb" "Feb" ...
 $ Do.you.have.experience.in.R.and.RStudio..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question.: chr  NA NA NA NA ...
 $ Do.you.have.experience.in.SPSS..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question.         : chr  NA NA NA NA ...
 $ Do.you.have.experience.in.Unix.Linux..or.will.you.be.getting.training.prior.to.this.workshop...Do.not.register.unless.you.can.answer.Yes.to.this.question.   : chr  NA NA NA NA ...
 $ year                                                                                                                                                         : int  2024 2024 2024 2024 2024 2024 2024 2024 2024 2024 ...
 $ Do.you.have.prior.experience.with.Python.                                                                                                                    : chr  NA NA NA NA ...
 $ Position.                                                                                                                                                    : chr  NA NA NA NA ...
 $ Are.you.currently.using.NCI.                                                                                                                                 : chr  NA NA NA NA ...
 $ Field.of.Research                                                                                                                                            : chr  NA NA NA NA ...
 $ Prior.knowledge.of.topic                                                                                                                                     : chr  NA NA NA NA ...
 $ School.faculty                                                                                                                                               : chr  NA NA NA NA ...
 $ Organisation.company                                                                                                                                         : logi  NA NA NA NA NA NA ...
 $ Do.you.have.experience.in.SPSS..or.will.you.be.getting.training.prior.to.this.workshop.                                                                      : chr  NA NA NA NA ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(attendance_all_years))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 99376</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Total rows and columns</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>dataset_summary <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">total_rows =</span> <span class="fu">nrow</span>(attendance_all_years),</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="at">total_columns =</span> <span class="fu">ncol</span>(attendance_all_years),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="at">unique_workshops =</span> <span class="fu">n_distinct</span>(attendance_all_years<span class="sc">$</span>workshop),</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="at">unique_organisations =</span> <span class="fu">n_distinct</span>(attendance_all_years<span class="sc">$</span>organisation),</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>dataset_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  total_rows total_columns unique_workshops unique_organisations
       &lt;int&gt;         &lt;int&gt;            &lt;int&gt;                &lt;int&gt;
1       5251            62               46                    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"The dataset contains"</span>, dataset_summary<span class="sc">$</span>total_rows, <span class="st">"rows and"</span>,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  dataset_summary<span class="sc">$</span>total_columns, <span class="st">"columns.</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  dataset_summary<span class="sc">$</span>unique_workshops, <span class="st">"unique workshops, and</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  dataset_summary<span class="sc">$</span>unique_organisations, <span class="st">"unique organisations represented.</span><span class="sc">\n</span><span class="st">"</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The dataset contains 5251 rows and 62 columns.
 46 unique workshops, and
 0 unique organisations represented.</code></pre>
</div>
</div>
</section>
<section id="data-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="data-cleaning">04. Data Cleaning</h3>
<p>This section standardizes column names, removes redundant fields, handles missing values, and prepares the dataset for analysis.</p>
<section id="check-potential-duplicate-columns" class="level4">
<h4 class="anchored" data-anchor-id="check-potential-duplicate-columns">4.1 Check Potential Duplicate Columns</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preview potential duplicate columns across datasets </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span> <span class="fu">select</span>(First.name, First.Name) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           First.name         First.Name
1      Alexandra Anne     Alexandra Anne
2               Jacob              Jacob
3  Jermaine Marie Ann Jermaine Marie Ann
4              Jinyun             Jinyun
5              Chioma             Chioma
6                 Amy                Amy
7                Asri               Asri
8             Natalie            Natalie
9               Lijun              Lijun
10            Katelyn            Katelyn</code></pre>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span> <span class="fu">select</span>(Last.name, Last.Name) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Last.name   Last.Name
1     Williams    Williams
2       Batham      Batham
3      Fabella     Fabella
4          Cai         Cai
5       Ojiako      Ojiako
6       McEwen      McEwen
7     Pratitis    Pratitis
8  Eaton-Fitch Eaton-Fitch
9  Summerhayes Summerhayes
10     Collins     Collins</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span> <span class="fu">select</span>(Organisation, Organisation.Company, Organisation.company) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          Organisation Organisation.Company
1        Central Queensland University                 &lt;NA&gt;
2                  Griffith University                 &lt;NA&gt;
3            Southern Cross University                 &lt;NA&gt;
4                  Griffith University                 &lt;NA&gt;
5     University of the Sunshine Coast                 &lt;NA&gt;
6                  Griffith University                 &lt;NA&gt;
7     University of the Sunshine Coast                 &lt;NA&gt;
8                  Griffith University                 &lt;NA&gt;
9  Queensland University of Technology                 &lt;NA&gt;
10   University of Southern Queensland                 &lt;NA&gt;
   Organisation.company
1                    NA
2                    NA
3                    NA
4                    NA
5                    NA
6                    NA
7                    NA
8                    NA
9                    NA
10                   NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span> <span class="fu">select</span>(School.or.faculty, School.faculty) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                           School.or.faculty School.faculty
1                                                      CMERC           &lt;NA&gt;
2                                                      NCNED           &lt;NA&gt;
3                         Faculty of Science and Engineering           &lt;NA&gt;
4                  School of Health Sciences and Social Work           &lt;NA&gt;
5              School of Science, Technology and Engineering           &lt;NA&gt;
6                                                       &lt;NA&gt;           &lt;NA&gt;
7              School of Science, Technology and Engineering           &lt;NA&gt;
8  National Centre for Neuroimmunology and Emerging Diseases           &lt;NA&gt;
9                                                       &lt;NA&gt;           &lt;NA&gt;
10                        School of Psychology and Wellbeing           &lt;NA&gt;</code></pre>
</div>
</div>
</section>
<section id="compare-missing-values-in-duplicate-columns" class="level4">
<h4 class="anchored" data-anchor-id="compare-missing-values-in-duplicate-columns">4.2 Compare Missing Values in Duplicate Columns</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sumarize the number of missing (NA) values in potentially duplicated columns </span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co"># to identify which versions contain usable data before merging or dropping</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">First.name_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(First.name)),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">First.Name_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(First.Name)),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Last.name_NA  =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Last.name)),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">Last.Name_NA  =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Last.Name)),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Organisation_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Organisation)),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Organisation.Company_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Organisation.Company)),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Organisation.company_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(Organisation.company)),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">School.or.faculty_NA =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(School.or.faculty)),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">School.faculty_NA=</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(School.faculty))</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  First.name_NA First.Name_NA Last.name_NA Last.Name_NA Organisation_NA
1             0             0            0            0            1255
  Organisation.Company_NA Organisation.company_NA School.or.faculty_NA
1                    4075                    5251                 2258
  School.faculty_NA
1              5247</code></pre>
</div>
</div>
</section>
<section id="remove-redundant-columns" class="level4">
<h4 class="anchored" data-anchor-id="remove-redundant-columns">4.3 Remove Redundant Columns</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop redundant columns</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>First.Name, <span class="sc">-</span>Last.Name, <span class="sc">-</span>Organisation.Company, <span class="sc">-</span>Organisation.company, <span class="sc">-</span>School.faculty, <span class="sc">-</span>Event)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardise-column-names" class="level4">
<h4 class="anchored" data-anchor-id="standardise-column-names">4.4 Standardise Column Names</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename key workshop</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(attendance_all_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "first_name"                                                                                                                                                
 [2] "last_name"                                                                                                                                                 
 [3] "seating_location"                                                                                                                                          
 [4] "ticket_type"                                                                                                                                               
 [5] "reporting_group"                                                                                                                                           
 [6] "package"                                                                                                                                                   
 [7] "order_id"                                                                                                                                                  
 [8] "ticket_no"                                                                                                                                                 
 [9] "order_date_time"                                                                                                                                           
[10] "timezone"                                                                                                                                                  
[11] "buyer_first_name"                                                                                                                                          
[12] "buyer_last_name"                                                                                                                                           
[13] "buyer_mobile"                                                                                                                                              
[14] "buyer_email"                                                                                                                                               
[15] "email"                                                                                                                                                     
[16] "mobile"                                                                                                                                                    
[17] "i_am"                                                                                                                                                      
[18] "please_specify"                                                                                                                                            
[19] "organisation"                                                                                                                                              
[20] "school_or_faculty"                                                                                                                                         
[21] "how_did_you_find_out_about_this_workshop"                                                                                                                  
[22] "paid"                                                                                                                                                      
[23] "humanitix_passed_on_fees"                                                                                                                                  
[24] "humanitix_absorbed_fees"                                                                                                                                   
[25] "amex_surcharge"                                                                                                                                            
[26] "custom_tax"                                                                                                                                                
[27] "zip_fee_absorbed"                                                                                                                                          
[28] "afterpay_fee_absorbed"                                                                                                                                     
[29] "refunds"                                                                                                                                                   
[30] "fee_rebate"                                                                                                                                                
[31] "your_earnings"                                                                                                                                             
[32] "refunded_fees"                                                                                                                                             
[33] "discount_code_used"                                                                                                                                        
[34] "discount_redeemed"                                                                                                                                         
[35] "tax_on_sales"                                                                                                                                              
[36] "tax_on_booking_fees"                                                                                                                                       
[37] "gateway"                                                                                                                                                   
[38] "access_code_used"                                                                                                                                          
[39] "checked_in"                                                                                                                                                
[40] "checked_in_date"                                                                                                                                           
[41] "event_date"                                                                                                                                                
[42] "event_time"                                                                                                                                                
[43] "qr_code_data"                                                                                                                                              
[44] "sales_channel"                                                                                                                                             
[45] "workshop"                                                                                                                                                  
[46] "month"                                                                                                                                                     
[47] "do_you_have_experience_in_r_and_r_studio_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question"
[48] "do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question"          
[49] "do_you_have_experience_in_unix_linux_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question"    
[50] "year"                                                                                                                                                      
[51] "do_you_have_prior_experience_with_python"                                                                                                                  
[52] "position"                                                                                                                                                  
[53] "are_you_currently_using_nci"                                                                                                                               
[54] "field_of_research"                                                                                                                                         
[55] "prior_knowledge_of_topic"                                                                                                                                  
[56] "do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop"                                                                     </code></pre>
</div>
</div>
</section>
<section id="identify-duplicate-rows" class="level4">
<h4 class="anchored" data-anchor-id="identify-duplicate-rows">4.5 Identify Duplicate Rows</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find duplicate rows</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>duplicates <span class="ot">&lt;-</span> attendance_all_years[<span class="fu">duplicated</span>(attendance_all_years), ]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(duplicates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] first_name                                                                                                                                                
 [2] last_name                                                                                                                                                 
 [3] seating_location                                                                                                                                          
 [4] ticket_type                                                                                                                                               
 [5] reporting_group                                                                                                                                           
 [6] package                                                                                                                                                   
 [7] order_id                                                                                                                                                  
 [8] ticket_no                                                                                                                                                 
 [9] order_date_time                                                                                                                                           
[10] timezone                                                                                                                                                  
[11] buyer_first_name                                                                                                                                          
[12] buyer_last_name                                                                                                                                           
[13] buyer_mobile                                                                                                                                              
[14] buyer_email                                                                                                                                               
[15] email                                                                                                                                                     
[16] mobile                                                                                                                                                    
[17] i_am                                                                                                                                                      
[18] please_specify                                                                                                                                            
[19] organisation                                                                                                                                              
[20] school_or_faculty                                                                                                                                         
[21] how_did_you_find_out_about_this_workshop                                                                                                                  
[22] paid                                                                                                                                                      
[23] humanitix_passed_on_fees                                                                                                                                  
[24] humanitix_absorbed_fees                                                                                                                                   
[25] amex_surcharge                                                                                                                                            
[26] custom_tax                                                                                                                                                
[27] zip_fee_absorbed                                                                                                                                          
[28] afterpay_fee_absorbed                                                                                                                                     
[29] refunds                                                                                                                                                   
[30] fee_rebate                                                                                                                                                
[31] your_earnings                                                                                                                                             
[32] refunded_fees                                                                                                                                             
[33] discount_code_used                                                                                                                                        
[34] discount_redeemed                                                                                                                                         
[35] tax_on_sales                                                                                                                                              
[36] tax_on_booking_fees                                                                                                                                       
[37] gateway                                                                                                                                                   
[38] access_code_used                                                                                                                                          
[39] checked_in                                                                                                                                                
[40] checked_in_date                                                                                                                                           
[41] event_date                                                                                                                                                
[42] event_time                                                                                                                                                
[43] qr_code_data                                                                                                                                              
[44] sales_channel                                                                                                                                             
[45] workshop                                                                                                                                                  
[46] month                                                                                                                                                     
[47] do_you_have_experience_in_r_and_r_studio_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question
[48] do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question          
[49] do_you_have_experience_in_unix_linux_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question    
[50] year                                                                                                                                                      
[51] do_you_have_prior_experience_with_python                                                                                                                  
[52] position                                                                                                                                                  
[53] are_you_currently_using_nci                                                                                                                               
[54] field_of_research                                                                                                                                         
[55] prior_knowledge_of_topic                                                                                                                                  
[56] do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop                                                                     
&lt;0 rows&gt; (or 0-length row.names)</code></pre>
</div>
</div>
</section>
<section id="remove-columns-with-80-missing-values" class="level4">
<h4 class="anchored" data-anchor-id="remove-columns-with-80-missing-values">4.6 Remove Columns with &gt;80% Missing Values</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate and sort missing value percentages by column</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>na_percent <span class="ot">&lt;-</span> <span class="fu">colMeans</span>(<span class="fu">is.na</span>(attendance_all_years)) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(na_percent, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                                          seating_location 
                                                                                                                                              100.00000000 
                                                                                                                                           reporting_group 
                                                                                                                                              100.00000000 
                                                                                                                                                   package 
                                                                                                                                              100.00000000 
                                                                                                                                          access_code_used 
                                                                                                                                              100.00000000 
                                                                                                                                           checked_in_date 
                                                                                                                                              100.00000000 
                                                                                                                                        discount_code_used 
                                                                                                                                               99.98095601 
                                                                     do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop 
                                                                                                                                               99.25728433 
                                                                                                                                            please_specify 
                                                                                                                                               98.83831651 
    do_you_have_experience_in_unix_linux_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question 
                                                                                                                                               98.70500857 
                                                                                                                  do_you_have_prior_experience_with_python 
                                                                                                                                               97.75280899 
          do_you_have_experience_in_spss_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question 
                                                                                                                                               92.53475528 
                                                                                                                                                  position 
                                                                                                                                               87.50714150 
                                                                                                                               are_you_currently_using_nci 
                                                                                                                                               87.50714150 
                                                                                                                                         field_of_research 
                                                                                                                                               87.50714150 
                                                                                                                                  prior_knowledge_of_topic 
                                                                                                                                               87.50714150 
do_you_have_experience_in_r_and_r_studio_or_will_you_be_getting_training_prior_to_this_workshop_do_not_register_unless_you_can_answer_yes_to_this_question 
                                                                                                                                               80.97505237 
                                                                                                                                         school_or_faculty 
                                                                                                                                               43.00133308 
                                                                                                                                              organisation 
                                                                                                                                               23.90020948 
                                                                                                                                                      i_am 
                                                                                                                                               18.52980385 
                                                                                                                  how_did_you_find_out_about_this_workshop 
                                                                                                                                               11.44543896 
                                                                                                                                                    mobile 
                                                                                                                                                0.01904399 
                                                                                                                                                     month 
                                                                                                                                                0.01904399 
                                                                                                                                                first_name 
                                                                                                                                                0.00000000 
                                                                                                                                                 last_name 
                                                                                                                                                0.00000000 
                                                                                                                                               ticket_type 
                                                                                                                                                0.00000000 
                                                                                                                                                  order_id 
                                                                                                                                                0.00000000 
                                                                                                                                                 ticket_no 
                                                                                                                                                0.00000000 
                                                                                                                                           order_date_time 
                                                                                                                                                0.00000000 
                                                                                                                                                  timezone 
                                                                                                                                                0.00000000 
                                                                                                                                          buyer_first_name 
                                                                                                                                                0.00000000 
                                                                                                                                           buyer_last_name 
                                                                                                                                                0.00000000 
                                                                                                                                              buyer_mobile 
                                                                                                                                                0.00000000 
                                                                                                                                               buyer_email 
                                                                                                                                                0.00000000 
                                                                                                                                                     email 
                                                                                                                                                0.00000000 
                                                                                                                                                      paid 
                                                                                                                                                0.00000000 
                                                                                                                                  humanitix_passed_on_fees 
                                                                                                                                                0.00000000 
                                                                                                                                   humanitix_absorbed_fees 
                                                                                                                                                0.00000000 
                                                                                                                                            amex_surcharge 
                                                                                                                                                0.00000000 
                                                                                                                                                custom_tax 
                                                                                                                                                0.00000000 
                                                                                                                                          zip_fee_absorbed 
                                                                                                                                                0.00000000 
                                                                                                                                     afterpay_fee_absorbed 
                                                                                                                                                0.00000000 
                                                                                                                                                   refunds 
                                                                                                                                                0.00000000 
                                                                                                                                                fee_rebate 
                                                                                                                                                0.00000000 
                                                                                                                                             your_earnings 
                                                                                                                                                0.00000000 
                                                                                                                                             refunded_fees 
                                                                                                                                                0.00000000 
                                                                                                                                         discount_redeemed 
                                                                                                                                                0.00000000 
                                                                                                                                              tax_on_sales 
                                                                                                                                                0.00000000 
                                                                                                                                       tax_on_booking_fees 
                                                                                                                                                0.00000000 
                                                                                                                                                   gateway 
                                                                                                                                                0.00000000 
                                                                                                                                                checked_in 
                                                                                                                                                0.00000000 
                                                                                                                                                event_date 
                                                                                                                                                0.00000000 
                                                                                                                                                event_time 
                                                                                                                                                0.00000000 
                                                                                                                                              qr_code_data 
                                                                                                                                                0.00000000 
                                                                                                                                             sales_channel 
                                                                                                                                                0.00000000 
                                                                                                                                                  workshop 
                                                                                                                                                0.00000000 
                                                                                                                                                      year 
                                                                                                                                                0.00000000 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop columns with more than 80% missing values</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">which</span>(na_percent<span class="sc">&gt;</span><span class="dv">80</span>))</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(attendance_all_years)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5251</code></pre>
</div>
</div>
</section>
<section id="remove-columns-with-only-one-unique-value" class="level4">
<h4 class="anchored" data-anchor-id="remove-columns-with-only-one-unique-value">4.7 Remove Columns with Only One Unique Value</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check unique values</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>unique_counts <span class="ot">&lt;-</span> <span class="fu">sapply</span>(attendance_all_years, \(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)))</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(unique_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                humanitix_passed_on_fees 
                                       1 
                              custom_tax 
                                       1 
                        zip_fee_absorbed 
                                       1 
                   afterpay_fee_absorbed 
                                       1 
                              fee_rebate 
                                       1 
                     tax_on_booking_fees 
                                       1 
                              checked_in 
                                       1 
                                timezone 
                                       2 
                          amex_surcharge 
                                       2 
                                 refunds 
                                       2 
                           refunded_fees 
                                       2 
                       discount_redeemed 
                                       2 
                                 gateway 
                                       2 
                           sales_channel 
                                       2 
                                    year 
                                       2 
                               ticket_no 
                                       3 
                                    i_am 
                                       7 
                 humanitix_absorbed_fees 
                                       8 
                           your_earnings 
                                       8 
                            tax_on_sales 
                                       8 
                              event_time 
                                      11 
                            organisation 
                                      12 
                                   month 
                                      12 
                                    paid 
                                      14 
how_did_you_find_out_about_this_workshop 
                                      16 
                             ticket_type 
                                      20 
                                workshop 
                                      46 
                              event_date 
                                     148 
                       school_or_faculty 
                                     736 
                        buyer_first_name 
                                    1770 
                              first_name 
                                    1773 
                         buyer_last_name 
                                    1923 
                               last_name 
                                    1935 
                             buyer_email 
                                    2317 
                                   email 
                                    2373 
                                  mobile 
                                    2521 
                            buyer_mobile 
                                    2558 
                         order_date_time 
                                    4988 
                                order_id 
                                    5236 
                            qr_code_data 
                                    5251 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>unique_counts</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                              first_name 
                                    1773 
                               last_name 
                                    1935 
                             ticket_type 
                                      20 
                                order_id 
                                    5236 
                               ticket_no 
                                       3 
                         order_date_time 
                                    4988 
                                timezone 
                                       2 
                        buyer_first_name 
                                    1770 
                         buyer_last_name 
                                    1923 
                            buyer_mobile 
                                    2558 
                             buyer_email 
                                    2317 
                                   email 
                                    2373 
                                  mobile 
                                    2521 
                                    i_am 
                                       7 
                            organisation 
                                      12 
                       school_or_faculty 
                                     736 
how_did_you_find_out_about_this_workshop 
                                      16 
                                    paid 
                                      14 
                humanitix_passed_on_fees 
                                       1 
                 humanitix_absorbed_fees 
                                       8 
                          amex_surcharge 
                                       2 
                              custom_tax 
                                       1 
                        zip_fee_absorbed 
                                       1 
                   afterpay_fee_absorbed 
                                       1 
                                 refunds 
                                       2 
                              fee_rebate 
                                       1 
                           your_earnings 
                                       8 
                           refunded_fees 
                                       2 
                       discount_redeemed 
                                       2 
                            tax_on_sales 
                                       8 
                     tax_on_booking_fees 
                                       1 
                                 gateway 
                                       2 
                              checked_in 
                                       1 
                              event_date 
                                     148 
                              event_time 
                                      11 
                            qr_code_data 
                                    5251 
                           sales_channel 
                                       2 
                                workshop 
                                      46 
                                   month 
                                      12 
                                    year 
                                       2 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove columns that have only one unique value</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="fu">n_distinct</span>(.) <span class="sc">&gt;</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-transformation" class="level3">
<h3 class="anchored" data-anchor-id="data-transformation">05. Data Transformation</h3>
<p>This section performs deeper standardization, fixing workshop names, harmonising organisation names, inferring missing organisations, creating consistent date formats, and generating hashed student IDs.</p>
<section id="convert-dates-and-datetimes" class="level4">
<h4 class="anchored" data-anchor-id="convert-dates-and-datetimes"><strong>5.1 Convert Dates and Datetimes</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert event column to appropriate data type</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years<span class="sc">$</span>event_date <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(attendance_all_years<span class="sc">$</span>event_date)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert order_date_time to datetime and separate into order_date and order_time columns</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert order_date_time from text to proper datetime (POSIXct)</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">order_date_time =</span> <span class="fu">as.POSIXct</span>(order_date_time, <span class="at">format =</span> <span class="st">"%Y-%m-%d %I:%M %p"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create separate date and time columns</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">order_date =</span> <span class="fu">as.Date</span>(order_date_time),                <span class="co"># extract date only</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">order_time =</span> <span class="fu">format</span>(order_date_time, <span class="st">"%H:%M:%S"</span>)      <span class="co"># extract time as string (24-hour)</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardize-workshop-names-general-normalization" class="level4">
<h4 class="anchored" data-anchor-id="standardize-workshop-names-general-normalization">5.2 Standardize Workshop Names (General Normalization)</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">workshop =</span> workshop <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_to_lower</span>() <span class="sc">%&gt;%</span>      <span class="co"># all lowercase</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_squish</span>() <span class="sc">%&gt;%</span>        <span class="co"># remove extra spaces</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_to_sentence</span>()       <span class="co"># capitalize first letter</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>workshop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Introduction to programming: r for reproducible scientific analysis"
 [2] "Introduction to spss"                                               
 [3] "Introduction to the unix shell"                                     
 [4] "Statistical comparisons using r"                                    
 [5] "R shiny essentials: from data to interactive dashboards"            
 [6] "Introduction to programming: plotting and programming in python"    
 [7] "Statistical comparisons using spss"                                 
 [8] "Exploring and predicting using linear regression in r"              
 [9] "Redcap 101 - getting started with redcap"                           
[10] "Redcap 102 - building projects in redcap"                           
[11] "Statistical comparisons for hass researchers"                       
[12] "An introduction to ngs and bioinformatics analysis"                 
[13] "Redcap 201 - advanced project management"                           
[14] "Longitudinal and mixed model analysis using r"                      
[15] "Redcap 202 - finalising and running a clinical trial"               
[16] "Working with sensitive data"                                        
[17] "Exploring and predicting using linear regression in spss"           
[18] "Data visualisation for research communication"                      
[19] "Rna-seq analysis using galaxy"                                      
[20] "Single-cell rna-seq analysis using r"                               
[21] "Analysing categorical outcomes and logistic regression with r"      
[22] "Containers for reproducible computational environments"             
[23] "Long-read assembly using galaxy"                                    
[24] "Single-cell rna-seq analysis using galaxy"                          
[25] "Genome annotation with apollo"                                      
[26] "Introduction to the unix shell - nci"                               
[27] "Introduction to python - nci"                                       
[28] "Version control with git - nci"                                     
[29] "Introduction to high performance computing - nci"                   
[30] "Introduction to image classification - nci"                         
[31] "Fundamentals of regression in machine learning - nci"               
[32] "Introduction to ngs and bioinformatics analysis"                    
[33] "Fundamentals of classification in machine learning - nci"           
[34] "Decision trees and ensemble methods in machine learning - nci"      
[35] "Getting started with redcap"                                        
[36] "Clustering and unsupervised methods in machine learning - nci"      
[37] "Building projects in redcap"                                        
[38] "Redcap advanced project management"                                 
[39] "Redcap finalising and running a clinical trial"                     
[40] "Introduction to programming: plotting and programming with python"  
[41] "R for reproducible scientific analysis"                             </code></pre>
</div>
</div>
</section>
<section id="fix-specific-workshop-name-variants" class="level4">
<h4 class="anchored" data-anchor-id="fix-specific-workshop-name-variants">5.3 Fix Specific Workshop Name Variants</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">workshop =</span> <span class="fu">case_when</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- REDCap 100 series ---</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Redcap 101 - getting started with redcap"</span> <span class="sc">~</span> <span class="st">"Getting started with redcap"</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Redcap 102 - building projects in redcap"</span> <span class="sc">~</span> <span class="st">"Building projects in redcap"</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- REDCap 200 series ---</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Redcap 201 - advanced project management"</span> <span class="sc">~</span> <span class="st">"Redcap advanced project management"</span>,</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Redcap 202 - finalising and running a clinical trial"</span> <span class="sc">~</span> <span class="st">"Redcap finalising and running a clinical trial"</span>,</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- Python workshop correction ---</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Introduction to programming: plotting and programming in python"</span> <span class="sc">~</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Introduction to programming: plotting and programming with python"</span>,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>       workshop <span class="sc">==</span> <span class="st">"Introduction to python - nci"</span> <span class="sc">~</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Introduction to programming: plotting and programming with python"</span>,</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- NGS workshop correction ---</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Introduction to ngs and bioinformatics analysis"</span> <span class="sc">~</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">"An introduction to ngs and bioinformatics analysis"</span>,</span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- Unix shell workshop correction ---</span></span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Introduction to the unix shell"</span> <span class="sc">~</span></span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Introduction to the unix shell - nci"</span>,</span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>      <span class="co"># --- RNA-seq workshop correction ---</span></span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>      workshop <span class="sc">==</span> <span class="st">"Rna-seq analysis using galaxy"</span> <span class="sc">~</span></span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Single-cell rna-seq analysis using galaxy"</span>,</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Keep all other names unchanged</span></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> workshop</span>
<span id="cb41-33"><a href="#cb41-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb41-34"><a href="#cb41-34" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>workshop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Introduction to programming: r for reproducible scientific analysis"
 [2] "Introduction to spss"                                               
 [3] "Introduction to the unix shell - nci"                               
 [4] "Statistical comparisons using r"                                    
 [5] "R shiny essentials: from data to interactive dashboards"            
 [6] "Introduction to programming: plotting and programming with python"  
 [7] "Statistical comparisons using spss"                                 
 [8] "Exploring and predicting using linear regression in r"              
 [9] "Getting started with redcap"                                        
[10] "Building projects in redcap"                                        
[11] "Statistical comparisons for hass researchers"                       
[12] "An introduction to ngs and bioinformatics analysis"                 
[13] "Redcap advanced project management"                                 
[14] "Longitudinal and mixed model analysis using r"                      
[15] "Redcap finalising and running a clinical trial"                     
[16] "Working with sensitive data"                                        
[17] "Exploring and predicting using linear regression in spss"           
[18] "Data visualisation for research communication"                      
[19] "Single-cell rna-seq analysis using galaxy"                          
[20] "Single-cell rna-seq analysis using r"                               
[21] "Analysing categorical outcomes and logistic regression with r"      
[22] "Containers for reproducible computational environments"             
[23] "Long-read assembly using galaxy"                                    
[24] "Genome annotation with apollo"                                      
[25] "Version control with git - nci"                                     
[26] "Introduction to high performance computing - nci"                   
[27] "Introduction to image classification - nci"                         
[28] "Fundamentals of regression in machine learning - nci"               
[29] "Fundamentals of classification in machine learning - nci"           
[30] "Decision trees and ensemble methods in machine learning - nci"      
[31] "Clustering and unsupervised methods in machine learning - nci"      
[32] "R for reproducible scientific analysis"                             </code></pre>
</div>
</div>
</section>
<section id="standardise-organisation-names" class="level4">
<h4 class="anchored" data-anchor-id="standardise-organisation-names"><strong>5.4 Standardise Organisation Names</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert CQUniversity to Central Queensland University</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>organisation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Central Queensland University"       "Griffith University"                
 [3] "Southern Cross University"           "University of the Sunshine Coast"   
 [5] "Queensland University of Technology" "University of Southern Queensland"  
 [7] "University of Queensland"            "James Cook University"              
 [9] NA                                    "Bond University"                    
[11] "Queensland Museum"                   "CQUniversity"                       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">organisation =</span> <span class="fu">case_when</span>(</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>      organisation <span class="sc">==</span> <span class="st">"CQUniversity"</span> <span class="sc">~</span> <span class="st">"Central Queensland University"</span>,</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> organisation</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="infer-missing-organisations-from-email-domain" class="level4">
<h4 class="anchored" data-anchor-id="infer-missing-organisations-from-email-domain"><strong>5.5 Infer Missing Organisations from Email Domain</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pattern-based inference</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">email_domain =</span> <span class="fu">tolower</span>(<span class="fu">sub</span>(<span class="st">".*@"</span>, <span class="st">""</span>, email))</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>email_domain)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "cqumail.com"                "griffith.edu.au"           
  [3] "student.scu.edu.au"         "griffithuni.edu.au"        
  [5] "student.usc.edu.au"         "research.usc.edu.au"       
  [7] "qut.edu.au"                 "unisq.edu.au"              
  [9] "hdr.qut.edu.au"             "uq.edu.au"                 
 [11] "scu.edu.au"                 "my.jcu.edu.au"             
 [13] "uqconnect.edu.au"           "mater.uq.edu.au"           
 [15] "student.uq.edu.au"          "usc.edu.au"                
 [17] "health.qld.gov.au"          "usq.edu.au"                
 [19] "cqu.edu.au"                 "uq.net.au"                 
 [21] "jcu.edu.au"                 "yahoo.com"                 
 [23] "gmail.com"                  "umail.usq.edu.au"          
 [25] "imb.uq.edu.au"              "hrd.qut.edu.au"            
 [27] "qcif.edu.au"                "me.com"                    
 [29] "bond.edu.au"                "lungfoundation.com.au"     
 [31] "qimrberghofer.edu.au"       "swin.edu.au"               
 [33] "utas.edu.au"                "pharmacy.uq.edu.au"        
 [35] "student.usc.au"             "unsw.edu.au"               
 [37] "unifesp.br"                 "inisq.edu.au"              
 [39] "daf.qld.gov.au"             "des.qld.gov.au"            
 [41] "my.jcu.edu.in"              "hotmail.com"               
 [43] "hdr.qut.edu.ph"             "student.iq.edu.au"         
 [45] "grififth.edu.au"            "snp.com.au"                
 [47] "melanoma.org.au"            "student.edu.au"            
 [49] "tiri.me"                    "uq.student.edu.au"         
 [51] "health.nsw.gov.au"          "hdr.edu.au"                
 [53] "mac.com"                    "qut.hdr.edu.au"            
 [55] "evolveenvironmental.com.au" "griffithunu.edu.au"        
 [57] "usyd.edu.au"                "uqconnnect.edu.au"         
 [59] "adelaide.edu.au"            "bom.gov.au"                
 [61] "etudiant-fst.utm.tn"        "vu.edu.au"                 
 [63] "163.com"                    "ad.unsw.edu.au"            
 [65] "student.uts.edu.au"         "hdr.mq.edu.au"             
 [67] "ga.gov.au"                  "anu.edu.au"                
 [69] "newcastle.edu.au"           "adfa.edu.au"               
 [71] "outlook.com"                "mq.edu.au"                 
 [73] "monash.edu"                 "csiro.au"                  
 [75] "dpie.nsw.gov.au"            "deakin.edu.au"             
 [77] "une.edu.au"                 "griffth.edu.au"            
 [79] "library.uq.edu.au"          "umail.edu.au"              
 [81] "student.scu.edu.ph"         "uon.edu.au"                
 [83] "garvan.org.au"              "uowmail.edu.au"            
 [85] "alumni.anu.edu.au"          "rfs.nsw.gov.au"            
 [87] "latrobe.edu.au"             "eprisk.com.au"             
 [89] "aims.gov.au"                "uwa.edu.au"                
 [91] "sydney.edu.au"              "health.qld.edu.au"         
 [93] "students.ltu.edu.au"        "uws.edu.au"                
 [95] "student.unimelb.edu.au"     "research.uwa.edu.au"       
 [97] "nourishingredients.com"     "victorchang.edu.au"        
 [99] "uni.sydney.edu.au"          "ccia.org.au"               
[101] "student.monash.edu"         "students.mq.edu.au"        
[103] "waternsw.com.au"            "mymail.unisa.edu.au"       
[105] "mail.ustc.edu.cn"           "dcceew.gov.au"             
[107] "uni.canberra.edu.au"        "qimrb.edu.au"              
[109] "curtin.edu.au"              "myune.edu.au"              
[111] "student.rmit.edu.au"        "windlab.com"               
[113] "umail.unisq.edu.au"         "hdr.qut.edu"               
[115] "sydney.eud.au"              "cdu.edu.au"                
[117] "flinders.edu.au"            "student.unsw.edu.au"       
[119] "autismcrc.com.au"           "aff.gov.au"                
[121] "connect.qut.edu.au"         "alumni.aun.edu.au"         
[123] "icloud.com"                 "sugarresearch.com.au"      
[125] "unimelb.edu.au"             "environment.nsw.gov.au"    
[127] "dpi.qld.gov.au"             "police.qld.gov.au"         
[129] "uts.edu.au"                 "furg.br"                   
[131] "svi.edu.au"                 "uow.edu.au"                
[133] "students.federation.edu.au" "ardc.edu.au"               
[135] "hernebio.tech"              "federation.edu.au"         
[137] "justice.qld.gov.au"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">organisation_inferred =</span> <span class="fu">case_when</span>(</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- University of Queensland ----</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"uq"</span>) <span class="sc">~</span> <span class="st">"University of Queensland"</span>,</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Central Queensland University ----</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"cqu"</span>) <span class="sc">~</span> <span class="st">"Central Queensland University"</span>,</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Griffith University ----</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"griffith"</span>) <span class="sc">|</span> </span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"grififth"</span>) <span class="sc">|</span> </span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"griffth"</span>) <span class="sc">|</span> </span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"griffithuni"</span>) <span class="sc">~</span> <span class="st">"Griffith University"</span>,</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Southern Cross University ----</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"scu"</span>) <span class="sc">~</span> <span class="st">"Southern Cross University"</span>,</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- University of the Sunshine Coast ----</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"usc"</span>) <span class="sc">~</span> <span class="st">"University of the Sunshine Coast"</span>,</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- QUT ----</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"qut"</span>) <span class="sc">~</span> <span class="st">"Queensland University of Technology"</span>,</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UniSQ (University of Southern Queensland) ----</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"usq"</span>) <span class="sc">|</span> </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"unisq"</span>) <span class="sc">~</span> <span class="st">"University of Southern Queensland"</span>,</span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- JCU ----</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"jcu"</span>) <span class="sc">~</span> <span class="st">"James Cook University"</span>,</span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Bond ----</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"bond"</span>) <span class="sc">~</span> <span class="st">"Bond University"</span>,</span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UNSW ----</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"unsw"</span>) <span class="sc">~</span> <span class="st">"University of New South Wales"</span>,</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- University of Sydney ----</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"sydney"</span>) <span class="sc">~</span> <span class="st">"University of Sydney"</span>,</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- ANU ----</span></span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"anu"</span>) <span class="sc">~</span> <span class="st">"Australian National University"</span>,</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Monash ----</span></span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"monash"</span>) <span class="sc">~</span> <span class="st">"Monash University"</span>,</span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UTAS ----</span></span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"utas"</span>) <span class="sc">~</span> <span class="st">"University of Tasmania"</span>,</span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Deakin ----</span></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"deakin"</span>) <span class="sc">~</span> <span class="st">"Deakin University"</span>,</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UniMelb ----</span></span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"unimelb"</span>) <span class="sc">~</span> <span class="st">"University of Melbourne"</span>,</span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UWA ----</span></span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"uwa"</span>) <span class="sc">~</span> <span class="st">"University of Western Australia"</span>,</span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UniSA ----</span></span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"unisa"</span>) <span class="sc">~</span> <span class="st">"University of South Australia"</span>,</span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- CDU ----</span></span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"cdu"</span>) <span class="sc">~</span> <span class="st">"Charles Darwin University"</span>,</span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Curtin ----</span></span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"curtin"</span>) <span class="sc">~</span> <span class="st">"Curtin University"</span>,</span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Newcastle ----</span></span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"newcastle"</span>) <span class="sc">~</span> <span class="st">"University of Newcastle"</span>,</span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UOW ----</span></span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"uow"</span>) <span class="sc">~</span> <span class="st">"University of Wollongong"</span>,</span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- La Trobe ----</span></span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"ltu"</span>) <span class="sc">~</span> <span class="st">"La Trobe University"</span>,</span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"latrobe"</span>) <span class="sc">~</span> <span class="st">"La Trobe University"</span>,</span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- RMIT ----</span></span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"rmit"</span>) <span class="sc">~</span> <span class="st">"RMIT University"</span>,</span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- UniCanberra ----</span></span>
<span id="cb49-83"><a href="#cb49-83" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"canberra"</span>) <span class="sc">~</span> <span class="st">"University of Canberra"</span>,</span>
<span id="cb49-84"><a href="#cb49-84" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-85"><a href="#cb49-85" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Federation ----</span></span>
<span id="cb49-86"><a href="#cb49-86" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"federation"</span>) <span class="sc">~</span> <span class="st">"Federation University"</span>,</span>
<span id="cb49-87"><a href="#cb49-87" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-88"><a href="#cb49-88" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Massey (NZ) ----</span></span>
<span id="cb49-89"><a href="#cb49-89" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"mq.edu.au"</span>) <span class="sc">~</span> <span class="st">"Macquarie University"</span>,</span>
<span id="cb49-90"><a href="#cb49-90" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-91"><a href="#cb49-91" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Overseas Universities ----</span></span>
<span id="cb49-92"><a href="#cb49-92" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(email_domain, <span class="st">"edu"</span>) <span class="sc">~</span> <span class="st">"International University"</span>,</span>
<span id="cb49-93"><a href="#cb49-93" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb49-94"><a href="#cb49-94" aria-hidden="true" tabindex="-1"></a>      <span class="co"># ---- Everything else ----</span></span>
<span id="cb49-95"><a href="#cb49-95" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Non-University / Unknown"</span></span>
<span id="cb49-96"><a href="#cb49-96" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-97"><a href="#cb49-97" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply inference only to missing entries:</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">organisation =</span> <span class="fu">if_else</span>(</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(organisation) <span class="sc">|</span> organisation <span class="sc">==</span> <span class="st">""</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>      organisation_inferred,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>      organisation</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>organisation_inferred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="standardize-month-values" class="level4">
<h4 class="anchored" data-anchor-id="standardize-month-values"><strong>5.6 Standardize Month Values</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Feb" "Mar" "Apr" "May" "Jun" "Jul" "Aug" NA    "Sep" "Oct" "Nov" "Dec"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(attendance_all_years<span class="sc">$</span>month))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View rows where month is missing</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(month)) <span class="sc">%&gt;%</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(workshop, event_date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                           workshop event_date
1 Introduction to programming: plotting and programming with python 2024-08-06</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract month directly from event_date</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get month from event_date</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">event_month =</span> lubridate<span class="sc">::</span><span class="fu">month</span>(event_date, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Replace NA in month with event_month</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> dplyr<span class="sc">::</span><span class="fu">coalesce</span>(month, <span class="fu">as.character</span>(event_month))</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>event_month)  <span class="co"># Remove the temporary helper column</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_all_years<span class="sc">$</span>month)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Feb" "Mar" "Apr" "May" "Jun" "Jul" "Aug" "Sep" "Oct" "Nov" "Dec"</code></pre>
</div>
</div>
</section>
<section id="generate-hashed-student-id" class="level4">
<h4 class="anchored" data-anchor-id="generate-hashed-student-id"><strong>5.7 Generate Hashed Student ID</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardize and Generate Student ID</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">email =</span> <span class="fu">tolower</span>(<span class="fu">trimws</span>(email)),</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">student_id =</span> <span class="fu">digest</span>(<span class="fu">paste</span>(</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coalesce</span>(email, <span class="st">""</span>)</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  ), <span class="at">algo =</span> <span class="st">"sha256"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="remove-duplicate-participantworkshop-records" class="level4">
<h4 class="anchored" data-anchor-id="remove-duplicate-participantworkshop-records"><strong>5.8 Remove Duplicate Participant–Workshop Records</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if any email is linked to more than one student ID</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(email) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">unique_ids =</span> <span class="fu">n_distinct</span>(student_id)) <span class="sc">%&gt;%</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(unique_ids <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 2
# ℹ 2 variables: email &lt;chr&gt;, unique_ids &lt;int&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify and inspect records where the same email is associated with multiple student IDs</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(email <span class="sc">%in%</span> (</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">group_by</span>(email) <span class="sc">%&gt;%</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">unique_ids =</span> <span class="fu">n_distinct</span>(student_id)) <span class="sc">%&gt;%</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(unique_ids <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">pull</span>(email)</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(email, first_name, last_name,student_id) <span class="sc">%&gt;%</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(email)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 4
# ℹ 4 variables: email &lt;chr&gt;, first_name &lt;chr&gt;, last_name &lt;chr&gt;,
#   student_id &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify Duplicate Registrations (Same patricipant + Event)</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(student_id, workshop) <span class="sc">%&gt;%</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 365 × 3
   student_id                                                     workshop     n
   &lt;chr&gt;                                                          &lt;chr&gt;    &lt;int&gt;
 1 005761e1728182d5f2fac081b5eeee96f65b308d02c5f347e27babff01569… Introdu…     2
 2 00a3c9eb9fc51e6e49b6d4ed59945ed6d8307c96876370927d9d243b3e99e… Introdu…     2
 3 0174fa0d808d8031add90e2e39ae06729e59c4c7b04727a9932f9f080f02a… Explori…     2
 4 019a25f94340e785f328ee27f57feacb6b0b080f73a30dba5701a5ed1ae24… Data vi…     2
 5 01afa3e51bd831918cc8bbe12f28e782922b725e610789b879d6ac0480cd6… Longitu…     2
 6 021dc79f6a223f37473622f6066310f28c70866d436c87e3559a0eb0067e5… Statist…     2
 7 0358580c4825087b9f6a1d5fe60046d784bbe197343733617427c4e359c0f… Introdu…     2
 8 0386d111981e4555a2600b29e6312bd84337ba39a2ced8a8e639eb7324bbf… Decisio…     2
 9 0386d111981e4555a2600b29e6312bd84337ba39a2ced8a8e639eb7324bbf… Introdu…     2
10 04bc6e43f139b24838aae7a5667a8e2e6aca5c0fd1ddba877adc43bf97939… Statist…     2
# ℹ 355 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">duplicated</span>(<span class="fu">select</span>(., student_id, workshop)) <span class="sc">|</span> <span class="fu">duplicated</span>(<span class="fu">select</span>(., student_id, workshop), <span class="at">fromLast =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 810 × 37
   first_name    last_name   ticket_type  order_id ticket_no order_date_time    
   &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;        &lt;chr&gt;    &lt;chr&gt;     &lt;dttm&gt;             
 1 Jinyun        Cai         QCIF Members 2F3JYTKS 1st       2024-01-31 14:50:00
 2 Abdulmalik    Almutairi   QCIF Members 3MT7H3SU 1st       2024-01-16 10:10:00
 3 Mollie        Cooper      QCIF Members 2YH5VPPR 1st       2024-01-15 13:31:00
 4 Eric Nkemjika Mark        QCIF Members WUNLMQBN 1st       2024-01-31 18:17:00
 5 Charu         Maini       QCIF Members Q6P98TKE 1st       2024-01-17 09:47:00
 6 Sokun         Song        QCIF Members JKULHRAR 1st       2024-01-16 07:45:00
 7 Jenny         Lee         QCIF Members NP92HPUP 1st       2024-02-13 12:31:00
 8 Paula         Gomez       QCIF Members BAFC8PTV 1st       2024-01-12 13:36:00
 9 Cameron       Leckie      QCIF Members HRKVPDMP 1st       2024-02-09 20:37:00
10 Francisca     Diaz-Aviles QCIF Members T6KHLP5F 1st       2024-02-09 10:25:00
# ℹ 800 more rows
# ℹ 31 more variables: timezone &lt;chr&gt;, buyer_first_name &lt;chr&gt;,
#   buyer_last_name &lt;chr&gt;, buyer_mobile &lt;chr&gt;, buyer_email &lt;chr&gt;, email &lt;chr&gt;,
#   mobile &lt;chr&gt;, i_am &lt;chr&gt;, organisation &lt;chr&gt;, school_or_faculty &lt;chr&gt;,
#   how_did_you_find_out_about_this_workshop &lt;chr&gt;, paid &lt;chr&gt;,
#   humanitix_absorbed_fees &lt;chr&gt;, amex_surcharge &lt;chr&gt;, refunds &lt;chr&gt;,
#   your_earnings &lt;chr&gt;, refunded_fees &lt;chr&gt;, discount_redeemed &lt;chr&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate participant-event records</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(student_id, workshop, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="classify-member-vs-non-member" class="level4">
<h4 class="anchored" data-anchor-id="classify-member-vs-non-member"><strong>5.9 Classify Member vs Non-Member</strong></h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years <span class="ot">&lt;-</span> attendance_all_years <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">member_status =</span> <span class="fu">case_when</span>(</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(ticket_type, <span class="fu">regex</span>(<span class="st">"QCIF</span><span class="sc">\\</span><span class="st">s*Member"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"member"</span>,</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(ticket_type, <span class="fu">regex</span>(<span class="st">"QCIF</span><span class="sc">\\</span><span class="st">s*Members"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"member"</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(ticket_type, <span class="fu">regex</span>(<span class="st">"QCIF</span><span class="sc">\\</span><span class="st">s*Associate"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">~</span> <span class="st">"member"</span>,</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"non_member"</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="save-cleaned-dataset" class="level3">
<h3 class="anchored" data-anchor-id="save-cleaned-dataset">06 Save Cleaned Dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(attendance_all_years,</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">file.path</span>(output_dir, <span class="st">"attendance_all_years_cleaned.csv"</span>),</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(attendance_all_years,</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">file.path</span>(output_dir, <span class="st">"attendance_cleaned.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="merge-with-workshop-prices" class="level3">
<h3 class="anchored" data-anchor-id="merge-with-workshop-prices">07. Merge with Workshop Prices</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>workshop_price <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data"</span>,<span class="st">"2025_workshop_price.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 34 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (2): code, workshop
dbl (2): price, time_hr

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>attendance_all_years_cleaned <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"output"</span>, <span class="st">"attendance_cleaned.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Standardise workshop names in price file</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>workshop_price <span class="ot">&lt;-</span> workshop_price <span class="sc">%&gt;%</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">workshop =</span> workshop <span class="sc">%&gt;%</span> </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_to_lower</span>() <span class="sc">%&gt;%</span>      <span class="co"># all lowercase</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_squish</span>() <span class="sc">%&gt;%</span>        <span class="co"># remove extra spaces</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_to_sentence</span>()       <span class="co"># capitalize first letter</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>att_ws <span class="ot">&lt;-</span> <span class="fu">unique</span>(attendance_all_years_cleaned<span class="sc">$</span>workshop)</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>price_ws <span class="ot">&lt;-</span> <span class="fu">unique</span>(workshop_price<span class="sc">$</span>workshop)</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Workshops in attendance but NOT in price file</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(att_ws, price_ws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>character(0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Workshops in price file but NOT in attendance</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(price_ws, att_ws)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Redcap workshop series"             "Large language models for research"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>workshop_price <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(workshop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 4
# ℹ 4 variables: code &lt;chr&gt;, workshop &lt;chr&gt;, price &lt;dbl&gt;, time_hr &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>workshop_price <span class="ot">&lt;-</span> workshop_price <span class="sc">%&gt;%</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span>workshop <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Redcap workshop series"</span>,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Large language models for research"</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># merge</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>attendance_merged <span class="ot">&lt;-</span> attendance_all_years_cleaned <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(workshop_price, <span class="at">by =</span> <span class="st">"workshop"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="apply-member-pricing-rule" class="level3">
<h3 class="anchored" data-anchor-id="apply-member-pricing-rule">08. Apply Member Pricing Rule</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>attendance_merged <span class="ot">&lt;-</span> attendance_merged <span class="sc">%&gt;%</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">price =</span> <span class="fu">if_else</span>(member_status <span class="sc">==</span> <span class="st">"member"</span>, <span class="dv">0</span>, price)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="categorize-workshops-into-qcif-training-themes" class="level4">
<h4 class="anchored" data-anchor-id="categorize-workshops-into-qcif-training-themes">09. Categorize Workshops into QCIF Training Themes</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>attendance_merged<span class="sc">$</span>category <span class="ot">&lt;-</span> <span class="fu">case_when</span>(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Programming</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"programming|python|r shiny|visualisation|dashboards|reproducible|containers"</span>, </span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>        attendance_merged<span class="sc">$</span>workshop, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Programming &amp; Data Skills"</span>,</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Statistics</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"spss|statistical|regression|mixed model|predicting|categorical outcomes"</span>, </span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>        attendance_merged<span class="sc">$</span>workshop, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Statistics &amp; Data Analysis"</span>,</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clinical / REDCap</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"redcap|clinical trial"</span>, </span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>        attendance_merged<span class="sc">$</span>workshop, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Clinical / REDCap"</span>,</span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Bioinformatics</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"bioinformatics|ngs|rna|galaxy|genome|annotation"</span>, </span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>        attendance_merged<span class="sc">$</span>workshop, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"Bioinformatics"</span>,</span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># HPC / Git / Unix / ML</span></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"unix|git|HPC|NCI|machine learning|classification|image classification|clustering|ensemble"</span>, </span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a>        attendance_merged<span class="sc">$</span>workshop, <span class="at">ignore.case =</span> <span class="cn">TRUE</span>) <span class="sc">~</span> <span class="st">"HPC / Git / Unix / ML"</span>,</span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Other"</span></span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="remove---nci-branding" class="level3">
<h3 class="anchored" data-anchor-id="remove---nci-branding">9.1 Remove “ - NCI” branding</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>attendance_merged <span class="ot">&lt;-</span> attendance_merged <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">workshop =</span> workshop <span class="sc">%&gt;%</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_replace</span>(<span class="fu">regex</span>(<span class="st">"[-–]?</span><span class="sc">\\</span><span class="st">s*NCI"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>), <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_trim</span>()</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(attendance_merged<span class="sc">$</span>workshop)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Introduction to programming: r for reproducible scientific analysis"
 [2] "Introduction to spss"                                               
 [3] "Introduction to the unix shell"                                     
 [4] "Statistical comparisons using r"                                    
 [5] "R shiny essentials: from data to interactive dashboards"            
 [6] "Introduction to programming: plotting and programming with python"  
 [7] "Statistical comparisons using spss"                                 
 [8] "Exploring and predicting using linear regression in r"              
 [9] "Getting started with redcap"                                        
[10] "Building projects in redcap"                                        
[11] "Statistical comparisons for hass researchers"                       
[12] "An introduction to ngs and bioinformatics analysis"                 
[13] "Redcap advanced project management"                                 
[14] "Longitudinal and mixed model analysis using r"                      
[15] "Redcap finalising and running a clinical trial"                     
[16] "Working with sensitive data"                                        
[17] "Exploring and predicting using linear regression in spss"           
[18] "Data visualisation for research communication"                      
[19] "Single-cell rna-seq analysis using galaxy"                          
[20] "Single-cell rna-seq analysis using r"                               
[21] "Analysing categorical outcomes and logistic regression with r"      
[22] "Containers for reproducible computational environments"             
[23] "Long-read assembly using galaxy"                                    
[24] "Genome annotation with apollo"                                      
[25] "Version control with git"                                           
[26] "Introduction to high performance computing"                         
[27] "Introduction to image classification"                               
[28] "Fundamentals of regression in machine learning"                     
[29] "Fundamentals of classification in machine learning"                 
[30] "Decision trees and ensemble methods in machine learning"            
[31] "Clustering and unsupervised methods in machine learning"            
[32] "R for reproducible scientific analysis"                             </code></pre>
</div>
</div>
</section>
<section id="save-final-transformed-dataset" class="level3">
<h3 class="anchored" data-anchor-id="save-final-transformed-dataset">10. Save Final Transformed Dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(attendance_merged)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 4,806
Columns: 42
$ first_name                               &lt;chr&gt; "Alexandra Anne", "Jacob", "J…
$ last_name                                &lt;chr&gt; "Williams", "Batham", "Fabell…
$ ticket_type                              &lt;chr&gt; "QCIF Members", "QCIF Members…
$ order_id                                 &lt;chr&gt; "MNVXUKLJ", "DVF54NPF", "Q42S…
$ ticket_no                                &lt;chr&gt; "1st", "1st", "1st", "1st", "…
$ order_date_time                          &lt;dttm&gt; 2024-02-01 13:39:00, 2024-02…
$ timezone                                 &lt;chr&gt; "AEST", "AEST", "AEST", "AEST…
$ buyer_first_name                         &lt;chr&gt; "Alexandra Anne", "Jacob", "J…
$ buyer_last_name                          &lt;chr&gt; "Williams", "Batham", "Fabell…
$ buyer_mobile                             &lt;chr&gt; "+61408189840", "0408795912",…
$ buyer_email                              &lt;chr&gt; "alexandra.williams@cqumail.c…
$ email                                    &lt;chr&gt; "alexandra.williams@cqumail.c…
$ mobile                                   &lt;chr&gt; "+61408189840", "0408795912",…
$ i_am                                     &lt;chr&gt; "Higher Degree Research Stude…
$ organisation                             &lt;chr&gt; "Central Queensland Universit…
$ school_or_faculty                        &lt;chr&gt; "CMERC", "NCNED", "Faculty of…
$ how_did_you_find_out_about_this_workshop &lt;chr&gt; "Supervisor", "Supervisor", "…
$ paid                                     &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ humanitix_absorbed_fees                  &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ amex_surcharge                           &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ refunds                                  &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ your_earnings                            &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ refunded_fees                            &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ discount_redeemed                        &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ tax_on_sales                             &lt;chr&gt; "$0.00", "$0.00", "$0.00", "$…
$ gateway                                  &lt;chr&gt; "braintree", "braintree", "br…
$ event_date                               &lt;date&gt; 2024-02-05, 2024-02-05, 2024…
$ event_time                               &lt;chr&gt; "9:00 am - 12:30 pm", "9:00 a…
$ qr_code_data                             &lt;chr&gt; "{\"eventId\":\"65812412e991e…
$ sales_channel                            &lt;chr&gt; "Online", "Online", "Online",…
$ workshop                                 &lt;chr&gt; "Introduction to programming:…
$ month                                    &lt;chr&gt; "Feb", "Feb", "Feb", "Feb", "…
$ year                                     &lt;int&gt; 2024, 2024, 2024, 2024, 2024,…
$ order_date                               &lt;date&gt; 2024-02-01, 2024-02-01, 2024…
$ order_time                               &lt;chr&gt; "13:39:00", "13:22:00", "21:1…
$ email_domain                             &lt;chr&gt; "cqumail.com", "griffith.edu.…
$ student_id                               &lt;chr&gt; "5ab4065f59ac974b89ccb79845d6…
$ member_status                            &lt;chr&gt; "member", "member", "member",…
$ code                                     &lt;chr&gt; "15_01_049", "15_01_049", "15…
$ price                                    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ time_hr                                  &lt;dbl&gt; 14, 14, 14, 14, 14, 14, 14, 1…
$ category                                 &lt;chr&gt; "Programming &amp; Data Skills", …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(attendance_merged, </span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">file.path</span>(output_dir, <span class="st">"attendance_with_prices.rds"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>